# 04장. 🔮 변수

## 4.1 변수란 무엇인가? 왜 필요한가?

### ✏️ 메모리

```js
10 + 20
```

- 자바스크립트 엔진이 자바스크립트 코드를 계산(*평가 evaluation*)하려면 먼저 10, 20, +라는 기호(*리터럴 literal*과 *연산자 operator*)의 의미를 알고 있어야 하며, 10+20이라는 식(*표현식 expression*)의 의미도 해석(*파싱 parsing*)할 수 있어야 한다.
- **컴퓨터는 CPU를 통해 연산하고, 메모리를 사용해 데이터를 기억한다.** 위 예제의 숫자 값 10, 20은 메모리 상의 임의의 위치(메모리 주소)에 기억(저장)되고, CPU는 이 값을 읽어들여 연산을 수행하는 것이다.
- 모든 데이터는 데이터의 종류(숫자, 텍스트, 이미지, 동영상 등)와 상관없이 모두 2진수로 저장되고 처리된다.

### ✏️ 변수의 필요성
- `10+20`의 연산이 성공적으로 처리되어 연산 결과도 메모리에 저장되었으나, 연산의 결과값인 30을 재사용하기 위해서 어떻게 해야할까?
  - 연산 결과 30이 저장된 메모리 공간에 직접 접근 하는 방법이 있다.
- 하지만 메모리 주소를 통해 값에 직접 접근하는 것은 치명적인 오류를 발생시킬 가능성이 매우 높고, 똑같은 `10+20`을 다시 실행하면 실행될 때마다 값이 저장될 메모리 주소가 계속 변경되기 때문에 메모리 공간에 직접 접근하는 것은 올바르지 않다.
- 기억하고 싶은 값을 **메모리에 저장**하고, 저장된 값을 읽어 들여 **재사용**하기 위해 변수가 필요하다.

### ✏️ 변수
💡 변수(*variable*)는 하나의 값을 저장하기 위해 확보한 **메모리 공간 자체** 또는 그 메모리 공간을 **식별하기 위해 붙인 이름**을 말한다.
- 변수는 프로그래밍 언어에서 값을 **저장**하고 **참조**하는 메커니즘으로, **값의 위치를 가리키는 상징적인 이름**이다.
- 변수는 프로그래밍 언어의 컴파일러 또는 인터프리터에 의해 값이 저장된 메모리 공간의 주소로 치환되어 실행된다. 따라서 개발자가 직접 메모리 주소를 통해 값을 저장하고 참조할 필요가 없고 변수를 통해 안전하게 값에 접근할 수 있다.

<br>

## 4.2 식별자
💡 변수 이름을 식별자라고도 한다. 식별자는 **어떤 값을 구별해서 식별할 수 있는 고유한 이름**을 말한다.
```js
var result = 10 + 20
```
- 식별자 `result`는 값 30이 저장되어 있는 메모리 주소를 기억해야 한다.
- 식별자는 값이 저장되어 있는 메모리 주소와 매핑 관계를 맺으며, 이 매핑 정보도 메모리에 저장되어야 한다.
- 식별자는 값이 아니라 **메모리 주소를 기억**하고 있다. 즉, 식별자는 메모리 주소에 붙인 이름이라고 할 수 있다.
- 변수, 함수, 클래스 등의 이름과 같은 식별자는 네이밍 규칙을 준수해야 하며, <b>선언(declaration)</b>에 의해 자바스크립트 엔진에 식별자의 존재를 알린다.

<br>

## 4.3 변수 선언
💡 변수 선언(variable declaration)이란 변수를 생성하는 것을 말하는데, 이는 값을 저장하기 위한 **메모리 공간을 확보**(*allocate*)하고 **변수 이름과 확보된 메모리 공간의 주소를 연결**(*name binding*)해서 값을 저장할 수 있도록 준비하는 것을 말한다.
- 변수를 사용하려면 **반드시 선언이 필요**하다.
- 변수를 선언할 때는 `var`, `let`, `const` 키워드를 사용한다.
  > var 키워드는 여러 단점이 있다. 그 중 대표적인 단점은 블록 레벨 스코프를 지원하지 않고 함수 레벨 스코프를 지원한다는 점이다. 이로 인해 의도치 않게 전역 변수가 선언되어 심각한 부작용을 발생시킬 수 있다.

### ✏️ 키워드
- 키워드는 자바스크립트 코드를 해석하고 실행하는 자바스크립트 엔진이 수행할 동작을 규정한 일종의 명령어이다.

자바스크립트 엔진은 변수 선언을 다음과 같은 2단계에 거쳐 수행한다.
- **선언 단계** : 변수 이름을 등록해서 자바스크립트 엔진에 변수의 존재를 알린다.
- **초기화 단계** : 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 `undefined`를 할당해 초기화한다.

<br>

## 4.4 변수 선언의 실행 시점과 변수 호이스팅
💡 자바스크립트 엔진은 변수 선언이 소스코드의 어디에 있든 상관 없이 다른 코드보다 먼저 실행된다.

```js
console.log(score); // undefined
var score; // 변수 선언문
```

- 변수 선언문보다 변수를 참조하는 코드가 앞에 있어 참조 에러가 발생할 것처럼 보이지만, 참조 에러가 발생하지 않고 `undefined`가 출력된다.
- 변수 선언이 **런타임(소스코드가 한 줄씩 순차적으로 실행되는 시점)이 아니라 그 이전 단계에서 먼저 실행되기 때문**이다.

### ✏️ 변수 호이스팅
- **변수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는** 자바스크립트 고유의 특징을 말한다.
  > 사실 변수 선언뿐 아니라 var, let, const, function, function*, class 키워드를 사용해서 선언하는 모든 식별자(변수, 함수, 클래스 등)는 호이스팅된다.

<br>

## 4.5 값의 할당
💡 변수에 값을 할당*assignment*(대입, 저장) 할 때는 할당 연산자 `=`를 사용한다.
- 할당 연산자는 우변의 값을 좌변의 변수에 할당한다.
- **변수 선언**은 **런타임(*소스코드가 순차적으로 실행되는 시점*) 이전**에 실행되지만, **값의 할당**은 **런타임에 실행**된다.

<br>

## 4.6 값의 재할당
💡 재할당이란 이미 값이 할당되어 있는 변수에 새로운 값을 또다시 할당하는 것을 말한다.
- `var` 키워드로 선언한 변수는 선언과 동시에 `undefined`로 초기화되기 때문에 엄밀히 말하자면 변수에 처음으로 값을 할당하는 것도 사실은 재할당이다.
- 만약 값을 재할당할 수 없어서 변수에 저장된 값을 변경할 수 없다면, 변수가 아니라 **상수 constant**라고 한다. 다시 말해 상수는 단 한 번만 할당할 수 있는 변수다.
  > `const` 키워드로 상수를 표현할 수 있다. 하지만 `const` 키워드는 반드시 상수만을 위해 사용하지는 않는다. (ex. 객체를 `const`로 할당 시 객체의 property는 바꿀 수 있음)

### ✏️ 가비지 콜렉터
- 애플리케이션이 할당(allocate)한 메모리 공간을 주기적으로 검사하여 더 이상 사용되지 않는 메모리를 해제(release)하는 기능
- 자바스크립트는 가비지 콜렉터를 내장하고 있는 *매니지드 언어*로서, 가비지 콜렉터를 통해 메모리 누수를 방지한다.

### 🔍 언매니지드 언어 vs 매니지드 언어
> 메모리 관리 방식에 따라 분류

|언매니지드 언어|매니지드 언어|
|------|------|
|C|JavaScript|
|개발자가 명시적으로 메모리를 할당하고 해제하기 위해<br> malloc()과 free()같은 저수준 메모리 제어 기능을 제공|메모리 할당 및 해제를 위한 메모리 관리 기능을 언어 차원에서 담당하고<br> 개발자의 직접적인 메모리 제어를 허용하지 않음|
|메모리 제어를 개발자가 주도할 수 있어<br>개발자의 역량에 따라 최적의 성능을 확보할 수 있다.|더이상 사용하지 않는 메모리의 해제는 가비지 콜렉터가 수행|
|하지만 그 반대의 경우 치명적 오류를 생산할 가능성도 존재한다.|개발자 역량에 의존하는 부분이 상대적으로 작아져 <br> 일정한 생산성 확보는 가능하나 성능 면에서 어느 정도의 손실 감수 필요|

<br>

## 4.7 식별자 네이밍 규칙

### ✏️ 네이밍 규칙
- 식별자는 특수문자를 제외한 문자, 숫자, 언더스코어(_), 달러 기호($)를 포함할 수 있다.
- 단, 식별자는 특수문자를 제외한 문자, 언더스코어(_), 달러 기호($)로 시작해야 한다. **숫자로 시작하면 안된다.**
- [예약어](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#reserved_words)는 식별자로 사용할 수 없다.

### ✏️ 네이밍 컨벤션
- 네이밍 컨벤션(naming convention)은 하나 이상의 영어 단어로 구성된 식별자를 만들 때 가독성을 위해 단어를 한눈에 구분할 수 있도록 규정한 명명 규칙이다.
- 일반적으로 변수나 함수의 이름에는 카멜 케이스를 사용하고, 생성자 함수, 클래스의 이름에는 파스칼 케이스를 사용한다.

```js
// 카멜 케이스(camelCase)
var firstName;
// 스네이크 케이스(snake_case)
var first_name;
// 파스칼 케이스(PascalCase)
var FirstName;
// 헝가리언 케이스(typeHungarianCase)
var strFirstName; // type + identifier numA strB objC 옛날에 많이 사용하던 방식 ㅎㅎ;
var $elem = document.getElementById('myId); // DOM 노드, jQuery에서 많이 사용하던 방식
```